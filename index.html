<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Zf2-tree-layout-stack by neilime</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Zf2-tree-layout-stack</h1>
        <p class="header">TreeLayoutStack is a module for ZF2 allowing the creation of tree layout </p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/neilime/zf2-tree-layout-stack/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/neilime/zf2-tree-layout-stack/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/neilime/zf2-tree-layout-stack">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/neilime">neilime</a></p>


      </header>
      <section>
        <h1>
<a name="treelayoutstack-v10" class="anchor" href="#treelayoutstack-v10"><span class="octicon octicon-link"></span></a>TreeLayoutStack, v1.0</h1>

<p><a href="https://travis-ci.org/neilime/zf2-tree-layout-stack"><img src="https://travis-ci.org/neilime/zf2-tree-layout-stack.png?branch=master" alt="Build Status"></a>
<a href="https://packagist.org/packages/neilime/zf2-tree-layout-stack"><img src="https://poser.pugx.org/neilime/zf2-tree-layout-stack/v/stable.png" alt="Latest Stable Version"></a>
<a href="https://packagist.org/packages/neilime/zf2-tree-layout-stack"><img src="https://poser.pugx.org/neilime/zf2-tree-layout-stack/downloads.png" alt="Total Downloads"></a>
<img src="https://raw.github.com/zf2-boiler-app/app-test/master/ressources/100%25-code-coverage.png" alt="Code coverage" title="100% code coverage"></p>

<p>NOTE : If you want to contribute don't hesitate, I'll review any PR.</p>

<h2>
<a name="introduction" class="anchor" href="#introduction"><span class="octicon octicon-link"></span></a>Introduction</h2>

<p>TreeLayoutStack is module for ZF2 allowing the creation of tree layout </p>

<h2>
<a name="requirements" class="anchor" href="#requirements"><span class="octicon octicon-link"></span></a>Requirements</h2>

<ul>
<li>
<a href="https://github.com/zendframework/zf2">Zend Framework 2</a> (latest master)</li>
</ul><h2>
<a name="installation" class="anchor" href="#installation"><span class="octicon octicon-link"></span></a>Installation</h2>

<h3>
<a name="main-setup" class="anchor" href="#main-setup"><span class="octicon octicon-link"></span></a>Main Setup</h3>

<h4>
<a name="by-cloning-project" class="anchor" href="#by-cloning-project"><span class="octicon octicon-link"></span></a>By cloning project</h4>

<ol>
<li>Clone this project into your <code>./vendor/</code> directory.</li>
</ol><h4>
<a name="with-composer" class="anchor" href="#with-composer"><span class="octicon octicon-link"></span></a>With composer</h4>

<ol>
<li>
<p>Add this project in your composer.json:</p>

<div class="highlight"><pre><span class="s2">"require"</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">"neilime/zf2-tree-layout-stack"</span><span class="p">:</span> <span class="s2">"dev-master"</span>
<span class="p">}</span>
</pre></div>
</li>
<li>
<p>Now tell composer to download TreeLayoutStack by running the command:</p>

<div class="highlight"><pre><span class="nv">$ </span>php composer.phar update
</pre></div>
</li>
</ol><h4>
<a name="post-installation" class="anchor" href="#post-installation"><span class="octicon octicon-link"></span></a>Post installation</h4>

<ol>
<li>
<p>Enabling it in your <code>application.config.php</code>file.</p>

<div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">return</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">'modules'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="c1">// ...</span>
        <span class="s1">'TreeLayoutStack'</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="c1">// ...</span>
<span class="p">);</span>
</pre></div>

<h1>
<a name="how-to-use-treelayoutstack" class="anchor" href="#how-to-use-treelayoutstack"><span class="octicon octicon-link"></span></a>How to use <em>TreeLayoutStack</em>
</h1>
</li>
</ol><h2>
<a name="simple-configuration-example" class="anchor" href="#simple-configuration-example"><span class="octicon octicon-link"></span></a>Simple configuration example</h2>

<p>This example shows how to define a simple tree layout stack with header and footer parts</p>

<ol>
<li><p>After installing skeleton application, install <em>TreeLayoutStack</em> as explained above.</p></li>
<li>
<p>Edit the application module configuration file <code>module/Application/config/module.config.php</code>, adding the configuration fragment below:</p>

<div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">return</span> <span class="k">array</span><span class="p">(</span>
    <span class="c1">//...</span>
    <span class="s1">'tree_layout_stack'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'layout_tree'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">'default'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">'template'</span> <span class="o">=&gt;</span> <span class="s1">'layout/layout'</span><span class="p">,</span>
                <span class="s1">'children'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                    <span class="s1">'header'</span> <span class="o">=&gt;</span> <span class="s1">'header/header'</span><span class="p">,</span>
                    <span class="s1">'footer'</span> <span class="o">=&gt;</span> <span class="s1">'footer/footer'</span>                                     
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
    <span class="p">),</span>
    <span class="c1">//...</span>
    <span class="s1">'view_manager'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">'template_map'</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="c1">//...</span>
            <span class="s1">'layout/layout'</span> <span class="o">=&gt;</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">'/../view/layout/layout.phtml'</span><span class="p">,</span>
            <span class="s1">'header/logged'</span> <span class="o">=&gt;</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">'/../view/layout/header.phtml'</span><span class="p">,</span>
            <span class="s1">'footer/footer'</span> <span class="o">=&gt;</span> <span class="nx">__DIR__</span> <span class="o">.</span> <span class="s1">'/../view/layout/footer.phtml'</span>
            <span class="c1">//...</span>
        <span class="p">)</span>
    <span class="p">)</span>
    <span class="c1">//...</span>
<span class="p">);</span>
</pre></div>
</li>
</ol><ol>
<li>
<p>Edit layout file <code>module/Application/view/layout/layout.phtml</code>, adding header and footer where you want to display them</p>

<div class="highlight"><pre>    <span class="c1">//...</span>
    <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">header</span><span class="p">;</span> <span class="c1">//Display header part</span>
    <span class="c1">//...</span>

    <span class="c1">//...</span>
    <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">layout</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">content</span><span class="p">;</span> <span class="c1">//Display content part</span>
    <span class="c1">//...</span>

    <span class="c1">//...</span>
    <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">layout</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">footer</span><span class="p">;</span> <span class="c1">//Display footer part</span>
    <span class="c1">//...   </span>
</pre></div>
</li>
<li><p>Create header and footer view files
<code>module/Application/view/layout/header.phtml</code>
<code>module/Application/view/layout/footer.phtml</code></p></li>
<li><p>Save &amp; Resfresh.</p></li>
</ol><h1>
<a name="configuration" class="anchor" href="#configuration"><span class="octicon octicon-link"></span></a>Configuration</h1>

<ol>
<li>
<em>TreeLayoutStack</em> :</li>
</ol><ul>
<li>array <code>layout_tree</code>: Define the layout tree, you can define differents tree layout stack, depends on module name, the <code>default</code> configuration is used if no template is defined for current module </li>
</ul><ol>
<li>Module layout tree map (<code>layout_tree</code> entry) :</li>
</ol><ul>
<li>string|array|callable template : define the template name</li>
<li>array children : (optionnal) define children of the template, the configuration is the same as the <code>layout_tree</code> entry or <code>template</code>
</li>
</ul><h2>
<a name="complexe-exemple" class="anchor" href="#complexe-exemple"><span class="octicon octicon-link"></span></a>Complexe exemple</h2>

<p>This example shows all the configuration options available, it assume that <code>template_map</code> is properly defined in <code>view_manager</code> configuration</p>

<pre><code>```php
&lt;?php
return array(
    //...
    'tree_layout_stack' =&gt; array(
        'layout_tree' =&gt; array(
            'default' =&gt; array(
                'template' =&gt; 'layout/layout',
                'children' =&gt; array(
                    'header' =&gt; function(\Zend\Mvc\MvcEvent $oEvent){
                        return $oEvent-&gt;getViewModel()-&gt;isLoggedUser?'header/logged':'header/unlogged' // Current MVC event is passed as argument to the callable template
                    },
                    'footer' =&gt; array(
                        'template' =&gt; 'footer/footer',
                        'children' =&gt; array(
                            'social' =&gt; 'footer/social',
                            'sitemap' =&gt; array('SampleClass','SampleFunction') //Sample callback
                        )
                    )                                   
                )
            )
        )
    ),
    //...
);
```
</code></pre>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>